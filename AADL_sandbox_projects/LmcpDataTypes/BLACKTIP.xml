<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE MDM SYSTEM 'MDM.DTD'>

<!--
        <h2>Introduction</h2>
        Defines the messages necessary to complete a target prosecution using a Black Tip UAV.

-->
<MDM>
    <SeriesName>BLACKTIP</SeriesName>
    <Namespace>uxas/project/blacktip</Namespace>
    <Version>1</Version>
	
	<EnumList>
        <!-- Describes which return approach trajectory to use after a
		waveoff. Used in BlackTipImpactTask. -->
        <Enum Name="ReApproachType">
            <!-- Use a "Button-Hook" trajectory for returning on impact task-->
            <Entry Name="ButtonHook" Value="0"/>
            <!-- Return along the original attack trajectory -->
            <Entry Name="LoopBack" Value="1"/>
        </Enum>
	</EnumList>

    <StructList>
	  
	  <!-- Creates an impact trajectory for a manueverable munition. Note
	  that impact heading constraints are specified using the base task
	  parameter 'WedgeList'. Airspeed from the nominal profile is used as
	  default, but can be overridden in the plan request message. The
	  returned waypoint plan from requesting this task starts at the
	  spiral-down point and includes two possible trajectories for continuously
	  attempting to impact the target (button-loop approach and loop-back
	  approach). A separate trajectory from the initial point to ditch point is
	  also included by returning an extended version of MissionCommand (see
	  MissionCommandWithContingency). For a graphical depiction of the returned
	  plans with the parameters see 'impacttask_topdown.png' and
	  'impacttask_altprofile.png'.
	  <br/><br/>
	  Limitations include: fixed approach altitude, no terrain awareness,
	  and no notions of maintaining communication connectivity. -->
      <Struct Name="BlackTipImpactTask" Extends="CMASI/Task">
        <!-- Point for which munition should plan to impact -->
        <Field Name="ImpactLocation" Type="CMASI/Location3D" />
        <!-- Glide slope angle at which the munition should approach the
		impact point -->
        <Field Name="ApproachAngle" Type="real32" Default="20.0" Units="degrees"/>
        <!-- Altitude at which the munition should plan its approach. Altitude
		is height above WGS84 ellipsoid and must be	greater than
		ImpactLocation.Altitude. AltitudeHeight is then defined as the
		difference between ApproachAltitude and ImpactLocation.Altitude -->
        <Field Name="ApproachAltitude" Type="real32" Units="meters"/>
        <!-- Distance at which the munition will begin its approach without
		changing heading -->
        <Field Name="StandoffDistance" Type="real32" Default="200.0" Units="meters"/>
        <!-- Distance at which the munition will automatically wave-off -->
        <Field Name="WaveoffDistance" Type="real32" Default="70.0" Units="meters"/>
        <!-- Point at which munition will descend to reach ApproachAltitude.
		A loiter point with duration equal to the approximate time it will take
		the munition to descend from its current altitude to the
		ApproachAltitude is placed at this point in the returned plan. -->
        <Field Name="SpiralDownLocation" Type="CMASI/Location3D"/>
        <!-- Point to which a ditch plan is computed. An infinite loiter is
		commanded at this location and altitude. This could serve as the
		loss-of-comm point for the munition. Returned as part of the
		contingency plan. -->
        <Field Name="DitchLocation" Type="CMASI/Location3D" />
        <!-- Raduis of turn to use when computing trajectories and loiters.
		For each of the looping manuevers in the loop-back and button-loop
		plans, this value is used to size the turn radius implied by the
		waypoint plan. This value is also used as the radius of the loiters
		at the spiral down location and ditch location. -->
        <Field Name="TurnRadius" Type="real32" Units="meters"/>
        <!-- Selects whether to use the value in the TurnRadius field (true) or
		use the calculated turn radius of the munition by examining the nominal
		flight profile in AirVehicleConfiguration (false). -->
        <Field Name="UseTurnRadius" Type="bool" Default="false"/>
        <!-- Selects whether the loop-back trajectory or button-loop trajectory
		is connected to the wave-off point. -->
        <Field Name="WaveoffApproach" Type="ReApproachType" Default="ButtonHook"/>
      </Struct>
	  
	  <!-- Impact specific action for initiating impact trajectory mode. Action is implemented
	  when vehicle begins approaching the waypoint which this action is attached to. For
	  BlackTip scenario, this should be attached to the pitch-over point. -->
	  <Struct Name="ImpactAction" Extends="CMASI/VehicleAction" >
        <!-- Planned angle of attack towards target -->
        <Field Name="ApproachAngle" Type="real32" Default="20.0" Units="degrees"/>
        <!-- Planned attack heading to target -->
        <Field Name="ApproachHeading" Type="real32" Units="degrees"/>
        <!-- Location of desired impact -->
        <Field Name="ImpactLocation" Type="CMASI/Location3D" />
        <!-- Index of waypoint that begins the waveoff plan -->
        <Field Name="WaveoffPlanID" Type="int64"/>
        <!-- Wave-off distance for auto-abort manuever. If commit has not been sent and the
		vehicle is within this distance of the target, an auto-wave-off manuever should
		be initiated. -->
        <Field Name="AutoWaveoffDistance" Type="real32" Default="70.0" Units="meters"/>
      </Struct>

    </StructList>
</MDM>




